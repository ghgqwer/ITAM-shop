<script>import { onMount, onDestroy, getContext } from "svelte";
import { Map, Icon, Marker } from "leaflet";
export let options = { iconUrl: "" };
export let instance = void 0;
let parentContext = getContext(Map);
const { getMap, getOverlay } = parentContext;
let icon;
onMount(() => {
  icon = new Icon(options);
});
$: map = getMap?.();
$: layer = getOverlay?.();
$: instance = icon;
$: if (map) {
  if (icon) {
    if (layer && layer instanceof Marker) {
      layer.setIcon(icon);
    } else {
      console.warn("Icon should bind Marker.");
    }
  }
}
function reset() {
  icon?.remove?.();
  icon = void 0;
}
onDestroy(() => {
  reset();
});
</script>
